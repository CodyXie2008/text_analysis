# 🎯 研究目标



**研究问题（RQ）：**

> 在短视频评论区中，一个评论集（父评论及其子评论）内部的从众心理水平是否会增强该评论集的网络暴力程度？

# 🧩 一、研究层次结构（Hierarchical Structure）


### 整体结构：

```
视频（1个）
└── 父评论集 A
    ├── 父评论 A0
    ├── 子评论 A1, A2, A3, ...
└── 父评论集 B
    ├── 父评论 B0
    ├── 子评论 B1, B2, B3, ...
└── 父评论集 C
    ├── ...
```

### 字段示例
```json
    {
      "comment_id": "7306484568302256935",
      "parent_comment_id": "7306470754056569635",
      "like_count": 182,
      "content": "你不说我以为是签到呢",
      "create_time": 1701173507,
      "ip_location": "陕西"
    }
```

### 分析单位
> 每个父评论集（Parent Thread） = 父评论 + 全部子评论

我们将对每个“评论集”计算：

- 从众心理指标（反映群体内部一致性与模仿性）
    
- 暴力强度指标（反映群体内部攻击性平均水平）
    


# 🧠 二、指标体系（基于“评论集”层面）

|类型|指标名称|含义|计算方法|
|---|---|---|---|
|🎯 因变量|**集体暴力强度** `GroupViolence`|一个父评论集的总体暴力水平|父+子评论暴力评分的平均值或加权平均（按点赞权重）|
|🔍 自变量|**群体从众指数** `GroupConformity`|评论集内部的模仿、一致、趋同程度|见下文详细计算|
|⚙️ 控制变量|**评论集热度** `Heat`|（点赞总数 + 子评论数）|父评论的like_count + 子评论数量|
||**层级深度均值** `AvgDepth`|评论层级结构的平均深度|mean(depth)|
||**时间跨度** `TimeRange`|该集最早和最晚评论间的时间差|max(create_time) - min(create_time)|

|类型|名称|含义|层级|
|---|---|---|---|
|因变量|**GroupViolence**|评论集整体暴力程度|评论集|
|自变量|**GroupConformity**|评论集内部从众心理强度|评论集|
|控制变量|**Heat**|评论集热度（父评论点赞 + 子评论数）|评论集|
|控制变量|**DepthMean**|评论平均层级|评论集|
|控制变量|**TimeRange**|子评论的时间跨度|评论集|

---

# 🧮 三、核心指标构建
## 1️⃣ 网络暴力强度（GroupViolence）

### 单条评论的暴力程度（comment-level）

#### 方法 A：词典法

建立“网络暴力词库”（攻击、侮辱、蔑视、歧视等）：

```python
violence_words = ["傻逼","垃圾","恶心","滚","死","废物","蠢","脑残","闭嘴"]
```

暴力指数计算：  
$$ V _ {i} = \frac {\text {匹 配 到 的 暴 力 词 数 量}}{3} (\text {上 限 为} 1) $$

#### 方法 B：模型法（推荐）

使用中文RoBERTa或ERNIE进行句级暴力分类，输出 `[0,1]` 之间概率。


先在**评论级别**识别暴力：

```python
violence_words = ["傻逼","垃圾","恶心","滚","死","废物","蠢","脑残","闭嘴"]
def get_violence_score(text):
    count = sum([text.count(w) for w in violence_words])
    return min(count / 3, 1.0)
```


---

### 评论集暴力强度（GroupViolence）

将一个父评论及其子评论的暴力分值聚合：

$$ G r o u p V i o l e n c e _ {j} = \frac {\sum_ {i} V _ {i j} \cdot (1 + \log (1 + \text {l i k e} _ {i j}))}{N _ {j}} $$

$$ G r o u p V i o l e n c e = \frac {\sum_ {i} \text {V i o l e n c e} _ {i} \times (1 + \log (1 + \text {l i k e} _ {i}))}{N} $$


👉 **加权平均**：点赞多的评论影响更大。  
可在Python中实现为：

```python
group_violence = np.sum(violence_scores * np.log1p(likes+1)) / len(comments)
```

---

## 2️⃣ 群体从众心理指数（GroupConformity）

### 评论集从众心理指数（GroupConformity）

我们要衡量这个评论集的“同质化”程度。可分为三个子维度并综合加权：

| 维度    | 指标                   | 计算方式                                                                               | 含义      |
| ----- | -------------------- | ---------------------------------------------------------------------------------- | ------- |
| 语义趋同  | `semantic_sim`       | 计算子评论间文本BERT向量的平均余弦相似度                                                             | 模仿性语言   |
| 情绪一致性 | `emotion_align`      | 情绪极性方差或同号率                                                                         | 情感同向    |
| 点赞集中度 | `like_concentration` | 计算点赞 Gini 系数或 Herfindahl 指数（H）Herfindahl指数：$\sum p_i^2$, 其中 $p_i = like_i / total$ | 社会认同集中度 |
- SemanticSimi​：语义趋同度（子评论对父评论内容的语义相似度）
$$ S C = 1 - \frac {1}{n} \sum_ {i = 1} ^ {n} | S _ {i} - S _ {p} | $$
	- $S_{p}$ ：父评论的情感值
	- $S_{i}$ ：第i条子评论情感值
	- $n$ : 子评论数
	- 结果范围：[0,1]，越接近1表示情感越趋同

- EmotionSimi​：情绪一致性（子评论与父评论的情感极性一致程度）

==要不要取平均值，容易受到极端值影响==

综合得分：  
$$ G r o u p C o n f o r m i t y = 0. 4 \times S e m a n t i c S i m + 0. 3 \times E m o t i o n A l g n + 0. 3 \times L i k e C o n c e n t r a t i o n $$

**Herfindahl 指数（Herfindahl–Hirschman Index, HHI）** 是衡量点赞集中度（like concentration）的一个非常重要指标，它在“从众心理建模”中用于反映**社会认同是否集中于少数评论上**。
详细解释 **Herfindahl 指数的含义、计算步骤、代码实现、以及在你这个网络评论模型中的意义。**

---

### 一、Herfindahl 指数的定义

**公式：**  
$$ H = \sum_ {i = 1} ^ {n} p _ {i} ^ {2} $$
其中：

- n：评论集内的评论数量（父+子）
    
- 每条评论的点赞占比$$ p _ {i} = \frac {\text {l i k e} _ {i}}{\sum_ {j - 1} ^ {n} \text {l i k e} _ {j}} $$
---

### 二、解释意义

- **H 越大**：点赞越集中在少数评论上，意味着**多数用户在模仿或追随主流观点**（从众性强）
    
- **H 越小**：点赞分散，各评论被平等认可，代表**意见多样、从众性弱**
    

在社会心理学上，**高 H 表示“社会认同趋同”现象**，是从众心理的重要表现形式。

---

###  三、计算步骤举例

假设某个父评论集下的点赞情况如下：

|评论|点赞数|
|---|---|
|父评论|100|
|子评论1|50|
|子评论2|30|
|子评论3|20|

计算过程：

1️⃣ 计算点赞总数  
$$ t o t a l = 1 0 0 + 5 0 + 3 0 + 2 0 = 2 0 0 $$

2️⃣ 计算每条的点赞占比  
$$ p = [ 1 0 0 / 2 0 0, 5 0 / 2 0 0, 3 0 / 2 0 0, 2 0 / 2 0 0 ] = [ 0. 5, 0. 2 5, 0. 1 5, 0. 1 0 ] $$

3️⃣ 计算平方并求和  
$$ H = 0. 5 ^ {2} + 0. 2 5 ^ {2} + 0. 1 5 ^ {2} + 0. 1 0 ^ {2} = 0. 2 5 + 0. 0 6 2 5 + 0. 0 2 2 5 + 0. 0 1 = 0. 3 4 5 $$

✅ **结果解释：**

- ( H = 0.345 )，说明点赞分布相对集中；
    
- 若 H 接近 1 → 极端集中（几乎所有赞都在一条评论上）；
    
- 若 H 接近 0 → 完全分散（每条评论点赞差不多）。
    

---

### 📈 六、可视化理解（推荐做图）

你可以画一张点赞分布图，比如：

- x 轴：评论序号
    
- y 轴：点赞比例 ( p_i )
    

通过观察分布的陡峭程度（是否“一家独大”），就能直观展示从众心理在点赞层面的表现。

---

## 3️⃣ 控制变量计算

### 🧩 一、控制变量列表

|控制变量|计算方式|
|---|---|
|Heat|父评论点赞数 + 子评论数|
|DepthMean|子评论平均深度（通常=1）|
|TimeRange|max(create_time) - min(create_time)|

|控制变量|含义|计算方式|
|---|---|---|
|**Heat**|评论集热度|父评论点赞 + 子评论数|
|**DepthMean**|评论集平均层级|所有评论深度的平均值|
|**TimeRange**|评论集时间跨度|子评论（含父评论）最新时间 - 最早时间|


### 🧮 二、计算思路

1️⃣ Heat（热度）

定义为：  
$$ H e a t = \text {父 评 论 点 赞} + \text {子 评 论 数 量} $$

**逻辑解释：**

- 评论集热度高，说明该评论集受到更多关注。
    
- 在心理学上，“社会证明”（social proof）效应可能增强从众心理，间接增加评论集的攻击性或争议性。
    
- 从统计上，Heat 是一个典型的 **正向偏差控制变量**，用于排除“高暴力评论只是因为被更多人看到”的情况。
    

**可能的影响：**

- 正相关：高热度评论集更容易产生激烈子评论 → 网络暴力增强
    
- 负相关：某些热门评论可能更和谐（被点赞、被管控） → 网络暴力减弱
    

**建模建议：**

- 可以取对数：`log(Heat+1)`，缓解大值对模型的影响
    
- 也可以做 z-score 标准化


Python 实现：

```python
def calc_heat(thread):
    parent_likes = thread['parent_comment']['like_count']
    sub_count = len(thread['sub_comments'])
    return parent_likes + sub_count
```

---

### 2️⃣ DepthMean（平均层级）

定义为：所有评论的深度平均值

- 原定义是 **平均深度**  
$$ D e p t h M e a n = \frac {\sum_ {i} d e p t h _ {i}}{N} $$
    
- 对两级结构：  
$$ D e p t h M e a n = \frac {0 + \underbrace {1 + 1 + \cdots + 1} _ {\text {子 评 论 数}}}{1 + \text {子 评 论 数}} = \frac {\text {子 评 论 数}}{1 + \text {子 评 论 数}} $$
    
- 这就变成了 **子评论占比的函数**，可以直接表示为：  
    $$ C h i l d R a t i o = \frac {\text {子 评 论 数}}{\text {总 评 论 数}} $$

✅ **结论**：在两级结构下，DepthMean 本质上是 **子评论占比**，用它就足够，不需要额外深度指标。

**逻辑解释：**

- 父评论本身为 0 层，子评论为 1 层（或更多）。
    
- 平均层级越深，意味着讨论链越长，评论集中可能出现“辐射式争吵”。
    
- 代表评论互动结构，影响网络暴力表现方式。
    

**可能的影响：**

- 正相关：更深的讨论链可能导致争议升级 → 网络暴力增强
    
- 负相关：深度高但子评论文明 → 平均暴力可能下降
    
- 总体作用需要和 `GroupConformity` 一起分析

**心理学解释**

- **ChildRatio（DepthMean）高 → 父评论吸引更多回复**
    
    - 父评论被大量回复 → 可能形成“小群体舆论压力” → 增强从众心理
        
    - 或者更多子评论 → 暴力强度平均化（冲淡单条暴力评论）
        
- **ChildRatio（DepthMean）低 → 父评论孤立**
    
    - 父评论可能暴力但不被响应 → 从众效应弱

Python 实现：

```python
def calc_depth_mean(thread):
    depths = [thread['parent_comment']['depth']]
    depths += [sub['depth'] for sub in thread['sub_comments']]
    return sum(depths) / len(depths)
```


---

### 3️⃣ TimeRange（时间跨度）

定义为：评论集内最早和最晚时间的差值（秒为单位）

**逻辑解释：**

- 表示评论持续时间，反映讨论持续性与延续性。
    
- 时间跨度长，说明该评论集长期存在争议，或者容易被新用户加入 → 网络暴力有累积趋势。
    

**可能的影响：**

- 正相关：长期被关注的评论集可能产生更多攻击性言论
    
- 负相关：讨论持续但参与者分散，激烈冲突可能被稀释


Python 实现：

```python
def calc_time_range(thread):
    times = [thread['parent_comment']['create_time']]
    times += [sub['create_time'] for sub in thread['sub_comments']]
    return max(times) - min(times)
```

---

### 4️⃣ 综合函数

可以把控制变量全部计算在一个函数里：

```python
def calc_control_vars(thread):
    heat = calc_heat(thread)
    depth_mean = calc_depth_mean(thread)
    time_range = calc_time_range(thread)
    return {
        'Heat': heat,
        'DepthMean': depth_mean,
        'TimeRange': time_range
    }
```

---

# 📈 四、统计建模思路

分析目标：验证假设

> H1：评论集的从众心理强度越高 → 集体暴力强度越高。

## 模型形式（线性回归）

$$ G r o u p V i o l e n c e _ {i} = \beta_ {0} + \beta_ {1} \cdot G r o u p C o n f o r m i t y _ {i} + \beta_ {2} \cdot H e a t _ {i} + \beta_ {3} \cdot C h i l d R a t i o _ {i} + \beta_ {4} \cdot T i m e R a n g e _ {i} + \epsilon_ {i} $$

其中：

|符号|含义|说明|
|---|---|---|
|GroupViolence|因变量|父评论集的暴力强度（0–1）|
|GroupConformity|自变量|评论语言的从众心理指标|
|Heat|控制变量|评论集热度|
|ChildRatio|控制变量|子评论占比|
|TimeRange|控制变量|评论持续时间|
|ε|残差|模型无法解释的部分|


或使用对数回归（若暴力分布偏态）：
$$ \log (G r o u p V i o l e n c e _ {i} + 1) = \dots $$
---
## 结果解释逻辑

若回归结果中：

- β₁（从众系数）> 0 且显著（p < 0.05） → 支持假设：  
    “群体从众心理越强，整体网络暴力越强烈。”
    
- 控制变量检验：
    
    - Heat 若显著 → 表示热度效应；
        
    - TimeRange 若显著 → 表示时间动态效应。
        
# 📊 五、可视化与检验

| 图表    | 内容                     | 目的        |
| ----- | ---------------------- | --------- |
| 散点图   | Conformity vs Violence | 观察总体趋势    |
| 热力图   | 语义相似度矩阵                | 直观展示趋同现象  |
| 箱线图   | 不同暴力水平的从众分布            | 对比组差异     |
| 回归残差图 | 模型拟合检验                 | 检查线性假设合理性 |

---

# 🧭 六、研究路线图

|阶段|任务|输出|
|---|---|---|
|1|解析 JSON → 父子评论树|结构化 DataFrame|
|2|计算单条评论指标|暴力分值、情绪分值|
|3|按父评论分组|聚合为“父评论集”|
|4|计算从众指标|语义+情绪+点赞集中度|
|5|统计分析|回归模型、显著性检验|
|6|结果解释|趋同与暴力的关系图表|

|阶段|步骤|输出|
|---|---|---|
|①|解析 JSON → DataFrame|单条评论表|
|②|暴力/情绪识别|评论层指标|
|③|聚合父评论集|评论集表|
|④|计算 Conformity + Violence|指标表|
|⑤|回归分析|模型系数|
|⑥|可视化与解释|趋势关系与结论|

---

# ✅ 七、下一步可实施建议

我可以帮你：

1. 写出一个完整的 **Python 分析脚本框架**：
    
    - 自动识别父评论集；
        
    - 计算 `GroupViolence` 与 `GroupConformity`；
        
    - 输出分析表格与回归结果。
        
2. 你只需提供：
    
    - JSON 评论文件；
        
    - 若可能，提供 `用户昵称、时间、点赞数、评论内容、父ID` 这些核心字段。
        


---




---

# 🧱 八、总结结构（论文或报告框架）

|部分|内容|
|---|---|
|研究背景|从众心理与网络暴力的社会心理基础|
|数据来源|抖音短视频评论（说明采样标准）|
|变量定义|详细解释暴力与从众计算|
|模型与方法|回归公式与数据处理流程|
|实证结果|回归表、显著性检验|
|讨论|从众心理机制解释、平台治理启示|

---

视为一个“小型舆论场”或“微型社交情境”