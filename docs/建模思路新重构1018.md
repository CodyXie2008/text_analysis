# ðŸŽ¯ ç ”ç©¶ç›®æ ‡



**ç ”ç©¶é—®é¢˜ï¼ˆRQï¼‰ï¼š**

> åœ¨çŸ­è§†é¢‘è¯„è®ºåŒºä¸­ï¼Œä¸€ä¸ªè¯„è®ºé›†ï¼ˆçˆ¶è¯„è®ºåŠå…¶å­è¯„è®ºï¼‰å†…éƒ¨çš„ä»Žä¼—å¿ƒç†æ°´å¹³æ˜¯å¦ä¼šå¢žå¼ºè¯¥è¯„è®ºé›†çš„ç½‘ç»œæš´åŠ›ç¨‹åº¦ï¼Ÿ

# ðŸ§© ä¸€ã€ç ”ç©¶å±‚æ¬¡ç»“æž„ï¼ˆHierarchical Structureï¼‰


### æ•´ä½“ç»“æž„ï¼š

```
è§†é¢‘ï¼ˆ1ä¸ªï¼‰
â””â”€â”€ çˆ¶è¯„è®ºé›† A
    â”œâ”€â”€ çˆ¶è¯„è®º A0
    â”œâ”€â”€ å­è¯„è®º A1, A2, A3, ...
â””â”€â”€ çˆ¶è¯„è®ºé›† B
    â”œâ”€â”€ çˆ¶è¯„è®º B0
    â”œâ”€â”€ å­è¯„è®º B1, B2, B3, ...
â””â”€â”€ çˆ¶è¯„è®ºé›† C
    â”œâ”€â”€ ...
```

### å­—æ®µç¤ºä¾‹
```json
    {
      "comment_id": "7306484568302256935",
      "parent_comment_id": "7306470754056569635",
      "like_count": 182,
      "content": "ä½ ä¸è¯´æˆ‘ä»¥ä¸ºæ˜¯ç­¾åˆ°å‘¢",
      "create_time": 1701173507,
      "ip_location": "é™•è¥¿"
    }
```

### åˆ†æžå•ä½
> æ¯ä¸ªçˆ¶è¯„è®ºé›†ï¼ˆParent Threadï¼‰ = çˆ¶è¯„è®º + å…¨éƒ¨å­è¯„è®º

æˆ‘ä»¬å°†å¯¹æ¯ä¸ªâ€œè¯„è®ºé›†â€è®¡ç®—ï¼š

- ä»Žä¼—å¿ƒç†æŒ‡æ ‡ï¼ˆåæ˜ ç¾¤ä½“å†…éƒ¨ä¸€è‡´æ€§ä¸Žæ¨¡ä»¿æ€§ï¼‰
    
- æš´åŠ›å¼ºåº¦æŒ‡æ ‡ï¼ˆåæ˜ ç¾¤ä½“å†…éƒ¨æ”»å‡»æ€§å¹³å‡æ°´å¹³ï¼‰
    


# ðŸ§  äºŒã€æŒ‡æ ‡ä½“ç³»ï¼ˆåŸºäºŽâ€œè¯„è®ºé›†â€å±‚é¢ï¼‰

|ç±»åž‹|æŒ‡æ ‡åç§°|å«ä¹‰|è®¡ç®—æ–¹æ³•|
|---|---|---|---|
|ðŸŽ¯ å› å˜é‡|**é›†ä½“æš´åŠ›å¼ºåº¦** `GroupViolence`|ä¸€ä¸ªçˆ¶è¯„è®ºé›†çš„æ€»ä½“æš´åŠ›æ°´å¹³|çˆ¶+å­è¯„è®ºæš´åŠ›è¯„åˆ†çš„å¹³å‡å€¼æˆ–åŠ æƒå¹³å‡ï¼ˆæŒ‰ç‚¹èµžæƒé‡ï¼‰|
|ðŸ” è‡ªå˜é‡|**ç¾¤ä½“ä»Žä¼—æŒ‡æ•°** `GroupConformity`|è¯„è®ºé›†å†…éƒ¨çš„æ¨¡ä»¿ã€ä¸€è‡´ã€è¶‹åŒç¨‹åº¦|è§ä¸‹æ–‡è¯¦ç»†è®¡ç®—|
|âš™ï¸ æŽ§åˆ¶å˜é‡|**è¯„è®ºé›†çƒ­åº¦** `Heat`|ï¼ˆç‚¹èµžæ€»æ•° + å­è¯„è®ºæ•°ï¼‰|çˆ¶è¯„è®ºçš„like_count + å­è¯„è®ºæ•°é‡|
||**å±‚çº§æ·±åº¦å‡å€¼** `AvgDepth`|è¯„è®ºå±‚çº§ç»“æž„çš„å¹³å‡æ·±åº¦|mean(depth)|
||**æ—¶é—´è·¨åº¦** `TimeRange`|è¯¥é›†æœ€æ—©å’Œæœ€æ™šè¯„è®ºé—´çš„æ—¶é—´å·®|max(create_time) - min(create_time)|

|ç±»åž‹|åç§°|å«ä¹‰|å±‚çº§|
|---|---|---|---|
|å› å˜é‡|**GroupViolence**|è¯„è®ºé›†æ•´ä½“æš´åŠ›ç¨‹åº¦|è¯„è®ºé›†|
|è‡ªå˜é‡|**GroupConformity**|è¯„è®ºé›†å†…éƒ¨ä»Žä¼—å¿ƒç†å¼ºåº¦|è¯„è®ºé›†|
|æŽ§åˆ¶å˜é‡|**Heat**|è¯„è®ºé›†çƒ­åº¦ï¼ˆçˆ¶è¯„è®ºç‚¹èµž + å­è¯„è®ºæ•°ï¼‰|è¯„è®ºé›†|
|æŽ§åˆ¶å˜é‡|**DepthMean**|è¯„è®ºå¹³å‡å±‚çº§|è¯„è®ºé›†|
|æŽ§åˆ¶å˜é‡|**TimeRange**|å­è¯„è®ºçš„æ—¶é—´è·¨åº¦|è¯„è®ºé›†|

---

# ðŸ§® ä¸‰ã€æ ¸å¿ƒæŒ‡æ ‡æž„å»º
## 1ï¸âƒ£ ç½‘ç»œæš´åŠ›å¼ºåº¦ï¼ˆGroupViolenceï¼‰

### å•æ¡è¯„è®ºçš„æš´åŠ›ç¨‹åº¦ï¼ˆcomment-levelï¼‰

#### æ–¹æ³• Aï¼šè¯å…¸æ³•

å»ºç«‹â€œç½‘ç»œæš´åŠ›è¯åº“â€ï¼ˆæ”»å‡»ã€ä¾®è¾±ã€è”‘è§†ã€æ­§è§†ç­‰ï¼‰ï¼š

```python
violence_words = ["å‚»é€¼","åžƒåœ¾","æ¶å¿ƒ","æ»š","æ­»","åºŸç‰©","è ¢","è„‘æ®‹","é—­å˜´"]
```

æš´åŠ›æŒ‡æ•°è®¡ç®—ï¼š  
$$ V _ {i} = \frac {\text {åŒ¹ é… åˆ° çš„ æš´ åŠ› è¯ æ•° é‡}}{3} (\text {ä¸Š é™ ä¸º} 1) $$

#### æ–¹æ³• Bï¼šæ¨¡åž‹æ³•ï¼ˆæŽ¨èï¼‰

ä½¿ç”¨ä¸­æ–‡RoBERTaæˆ–ERNIEè¿›è¡Œå¥çº§æš´åŠ›åˆ†ç±»ï¼Œè¾“å‡º `[0,1]` ä¹‹é—´æ¦‚çŽ‡ã€‚


å…ˆåœ¨**è¯„è®ºçº§åˆ«**è¯†åˆ«æš´åŠ›ï¼š

```python
violence_words = ["å‚»é€¼","åžƒåœ¾","æ¶å¿ƒ","æ»š","æ­»","åºŸç‰©","è ¢","è„‘æ®‹","é—­å˜´"]
def get_violence_score(text):
    count = sum([text.count(w) for w in violence_words])
    return min(count / 3, 1.0)
```


---

### è¯„è®ºé›†æš´åŠ›å¼ºåº¦ï¼ˆGroupViolenceï¼‰

å°†ä¸€ä¸ªçˆ¶è¯„è®ºåŠå…¶å­è¯„è®ºçš„æš´åŠ›åˆ†å€¼èšåˆï¼š

$$ G r o u p V i o l e n c e _ {j} = \frac {\sum_ {i} V _ {i j} \cdot (1 + \log (1 + \text {l i k e} _ {i j}))}{N _ {j}} $$

$$ G r o u p V i o l e n c e = \frac {\sum_ {i} \text {V i o l e n c e} _ {i} \times (1 + \log (1 + \text {l i k e} _ {i}))}{N} $$


ðŸ‘‰ **åŠ æƒå¹³å‡**ï¼šç‚¹èµžå¤šçš„è¯„è®ºå½±å“æ›´å¤§ã€‚  
å¯åœ¨Pythonä¸­å®žçŽ°ä¸ºï¼š

```python
group_violence = np.sum(violence_scores * np.log1p(likes+1)) / len(comments)
```

---

## 2ï¸âƒ£ ç¾¤ä½“ä»Žä¼—å¿ƒç†æŒ‡æ•°ï¼ˆGroupConformityï¼‰

### è¯„è®ºé›†ä»Žä¼—å¿ƒç†æŒ‡æ•°ï¼ˆGroupConformityï¼‰

æˆ‘ä»¬è¦è¡¡é‡è¿™ä¸ªè¯„è®ºé›†çš„â€œåŒè´¨åŒ–â€ç¨‹åº¦ã€‚å¯åˆ†ä¸ºä¸‰ä¸ªå­ç»´åº¦å¹¶ç»¼åˆåŠ æƒï¼š

| ç»´åº¦    | æŒ‡æ ‡                   | è®¡ç®—æ–¹å¼                                                                               | å«ä¹‰      |
| ----- | -------------------- | ---------------------------------------------------------------------------------- | ------- |
| è¯­ä¹‰è¶‹åŒ  | `semantic_sim`       | è®¡ç®—å­è¯„è®ºé—´æ–‡æœ¬BERTå‘é‡çš„å¹³å‡ä½™å¼¦ç›¸ä¼¼åº¦                                                             | æ¨¡ä»¿æ€§è¯­è¨€   |
| æƒ…ç»ªä¸€è‡´æ€§ | `emotion_align`      | æƒ…ç»ªæžæ€§æ–¹å·®æˆ–åŒå·çŽ‡                                                                         | æƒ…æ„ŸåŒå‘    |
| ç‚¹èµžé›†ä¸­åº¦ | `like_concentration` | è®¡ç®—ç‚¹èµž Gini ç³»æ•°æˆ– Herfindahl æŒ‡æ•°ï¼ˆHï¼‰HerfindahlæŒ‡æ•°ï¼š$\sum p_i^2$, å…¶ä¸­ $p_i = like_i / total$ | ç¤¾ä¼šè®¤åŒé›†ä¸­åº¦ |
- SemanticSimiâ€‹ï¼šè¯­ä¹‰è¶‹åŒåº¦ï¼ˆå­è¯„è®ºå¯¹çˆ¶è¯„è®ºå†…å®¹çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰
$$ S C = 1 - \frac {1}{n} \sum_ {i = 1} ^ {n} | S _ {i} - S _ {p} | $$
	- $S_{p}$ ï¼šçˆ¶è¯„è®ºçš„æƒ…æ„Ÿå€¼
	- $S_{i}$ ï¼šç¬¬iæ¡å­è¯„è®ºæƒ…æ„Ÿå€¼
	- $n$ : å­è¯„è®ºæ•°
	- ç»“æžœèŒƒå›´ï¼š[0,1]ï¼Œè¶ŠæŽ¥è¿‘1è¡¨ç¤ºæƒ…æ„Ÿè¶Šè¶‹åŒ

- EmotionSimiâ€‹ï¼šæƒ…ç»ªä¸€è‡´æ€§ï¼ˆå­è¯„è®ºä¸Žçˆ¶è¯„è®ºçš„æƒ…æ„Ÿæžæ€§ä¸€è‡´ç¨‹åº¦ï¼‰

==è¦ä¸è¦å–å¹³å‡å€¼ï¼Œå®¹æ˜“å—åˆ°æžç«¯å€¼å½±å“==

ç»¼åˆå¾—åˆ†ï¼š  
$$ G r o u p C o n f o r m i t y = 0. 4 \times S e m a n t i c S i m + 0. 3 \times E m o t i o n A l g n + 0. 3 \times L i k e C o n c e n t r a t i o n $$

**Herfindahl æŒ‡æ•°ï¼ˆHerfindahlâ€“Hirschman Index, HHIï¼‰** æ˜¯è¡¡é‡ç‚¹èµžé›†ä¸­åº¦ï¼ˆlike concentrationï¼‰çš„ä¸€ä¸ªéžå¸¸é‡è¦æŒ‡æ ‡ï¼Œå®ƒåœ¨â€œä»Žä¼—å¿ƒç†å»ºæ¨¡â€ä¸­ç”¨äºŽåæ˜ **ç¤¾ä¼šè®¤åŒæ˜¯å¦é›†ä¸­äºŽå°‘æ•°è¯„è®ºä¸Š**ã€‚
è¯¦ç»†è§£é‡Š **Herfindahl æŒ‡æ•°çš„å«ä¹‰ã€è®¡ç®—æ­¥éª¤ã€ä»£ç å®žçŽ°ã€ä»¥åŠåœ¨ä½ è¿™ä¸ªç½‘ç»œè¯„è®ºæ¨¡åž‹ä¸­çš„æ„ä¹‰ã€‚**

---

### ä¸€ã€Herfindahl æŒ‡æ•°çš„å®šä¹‰

**å…¬å¼ï¼š**  
$$ H = \sum_ {i = 1} ^ {n} p _ {i} ^ {2} $$
å…¶ä¸­ï¼š

- nï¼šè¯„è®ºé›†å†…çš„è¯„è®ºæ•°é‡ï¼ˆçˆ¶+å­ï¼‰
    
- æ¯æ¡è¯„è®ºçš„ç‚¹èµžå æ¯”$$ p _ {i} = \frac {\text {l i k e} _ {i}}{\sum_ {j - 1} ^ {n} \text {l i k e} _ {j}} $$
---

### äºŒã€è§£é‡Šæ„ä¹‰

- **H è¶Šå¤§**ï¼šç‚¹èµžè¶Šé›†ä¸­åœ¨å°‘æ•°è¯„è®ºä¸Šï¼Œæ„å‘³ç€**å¤šæ•°ç”¨æˆ·åœ¨æ¨¡ä»¿æˆ–è¿½éšä¸»æµè§‚ç‚¹**ï¼ˆä»Žä¼—æ€§å¼ºï¼‰
    
- **H è¶Šå°**ï¼šç‚¹èµžåˆ†æ•£ï¼Œå„è¯„è®ºè¢«å¹³ç­‰è®¤å¯ï¼Œä»£è¡¨**æ„è§å¤šæ ·ã€ä»Žä¼—æ€§å¼±**
    

åœ¨ç¤¾ä¼šå¿ƒç†å­¦ä¸Šï¼Œ**é«˜ H è¡¨ç¤ºâ€œç¤¾ä¼šè®¤åŒè¶‹åŒâ€çŽ°è±¡**ï¼Œæ˜¯ä»Žä¼—å¿ƒç†çš„é‡è¦è¡¨çŽ°å½¢å¼ã€‚

---

###  ä¸‰ã€è®¡ç®—æ­¥éª¤ä¸¾ä¾‹

å‡è®¾æŸä¸ªçˆ¶è¯„è®ºé›†ä¸‹çš„ç‚¹èµžæƒ…å†µå¦‚ä¸‹ï¼š

|è¯„è®º|ç‚¹èµžæ•°|
|---|---|
|çˆ¶è¯„è®º|100|
|å­è¯„è®º1|50|
|å­è¯„è®º2|30|
|å­è¯„è®º3|20|

è®¡ç®—è¿‡ç¨‹ï¼š

1ï¸âƒ£ è®¡ç®—ç‚¹èµžæ€»æ•°  
$$ t o t a l = 1 0 0 + 5 0 + 3 0 + 2 0 = 2 0 0 $$

2ï¸âƒ£ è®¡ç®—æ¯æ¡çš„ç‚¹èµžå æ¯”  
$$ p = [ 1 0 0 / 2 0 0, 5 0 / 2 0 0, 3 0 / 2 0 0, 2 0 / 2 0 0 ] = [ 0. 5, 0. 2 5, 0. 1 5, 0. 1 0 ] $$

3ï¸âƒ£ è®¡ç®—å¹³æ–¹å¹¶æ±‚å’Œ  
$$ H = 0. 5 ^ {2} + 0. 2 5 ^ {2} + 0. 1 5 ^ {2} + 0. 1 0 ^ {2} = 0. 2 5 + 0. 0 6 2 5 + 0. 0 2 2 5 + 0. 0 1 = 0. 3 4 5 $$

âœ… **ç»“æžœè§£é‡Šï¼š**

- ( H = 0.345 )ï¼Œè¯´æ˜Žç‚¹èµžåˆ†å¸ƒç›¸å¯¹é›†ä¸­ï¼›
    
- è‹¥ H æŽ¥è¿‘ 1 â†’ æžç«¯é›†ä¸­ï¼ˆå‡ ä¹Žæ‰€æœ‰èµžéƒ½åœ¨ä¸€æ¡è¯„è®ºä¸Šï¼‰ï¼›
    
- è‹¥ H æŽ¥è¿‘ 0 â†’ å®Œå…¨åˆ†æ•£ï¼ˆæ¯æ¡è¯„è®ºç‚¹èµžå·®ä¸å¤šï¼‰ã€‚
    

---

### ðŸ“ˆ å…­ã€å¯è§†åŒ–ç†è§£ï¼ˆæŽ¨èåšå›¾ï¼‰

ä½ å¯ä»¥ç”»ä¸€å¼ ç‚¹èµžåˆ†å¸ƒå›¾ï¼Œæ¯”å¦‚ï¼š

- x è½´ï¼šè¯„è®ºåºå·
    
- y è½´ï¼šç‚¹èµžæ¯”ä¾‹ ( p_i )
    

é€šè¿‡è§‚å¯Ÿåˆ†å¸ƒçš„é™¡å³­ç¨‹åº¦ï¼ˆæ˜¯å¦â€œä¸€å®¶ç‹¬å¤§â€ï¼‰ï¼Œå°±èƒ½ç›´è§‚å±•ç¤ºä»Žä¼—å¿ƒç†åœ¨ç‚¹èµžå±‚é¢çš„è¡¨çŽ°ã€‚

---

## 3ï¸âƒ£ æŽ§åˆ¶å˜é‡è®¡ç®—

### ðŸ§© ä¸€ã€æŽ§åˆ¶å˜é‡åˆ—è¡¨

|æŽ§åˆ¶å˜é‡|è®¡ç®—æ–¹å¼|
|---|---|
|Heat|çˆ¶è¯„è®ºç‚¹èµžæ•° + å­è¯„è®ºæ•°|
|DepthMean|å­è¯„è®ºå¹³å‡æ·±åº¦ï¼ˆé€šå¸¸=1ï¼‰|
|TimeRange|max(create_time) - min(create_time)|

|æŽ§åˆ¶å˜é‡|å«ä¹‰|è®¡ç®—æ–¹å¼|
|---|---|---|
|**Heat**|è¯„è®ºé›†çƒ­åº¦|çˆ¶è¯„è®ºç‚¹èµž + å­è¯„è®ºæ•°|
|**DepthMean**|è¯„è®ºé›†å¹³å‡å±‚çº§|æ‰€æœ‰è¯„è®ºæ·±åº¦çš„å¹³å‡å€¼|
|**TimeRange**|è¯„è®ºé›†æ—¶é—´è·¨åº¦|å­è¯„è®ºï¼ˆå«çˆ¶è¯„è®ºï¼‰æœ€æ–°æ—¶é—´ - æœ€æ—©æ—¶é—´|


### ðŸ§® äºŒã€è®¡ç®—æ€è·¯

1ï¸âƒ£ Heatï¼ˆçƒ­åº¦ï¼‰

å®šä¹‰ä¸ºï¼š  
$$ H e a t = \text {çˆ¶ è¯„ è®º ç‚¹ èµž} + \text {å­ è¯„ è®º æ•° é‡} $$

**é€»è¾‘è§£é‡Šï¼š**

- è¯„è®ºé›†çƒ­åº¦é«˜ï¼Œè¯´æ˜Žè¯¥è¯„è®ºé›†å—åˆ°æ›´å¤šå…³æ³¨ã€‚
    
- åœ¨å¿ƒç†å­¦ä¸Šï¼Œâ€œç¤¾ä¼šè¯æ˜Žâ€ï¼ˆsocial proofï¼‰æ•ˆåº”å¯èƒ½å¢žå¼ºä»Žä¼—å¿ƒç†ï¼Œé—´æŽ¥å¢žåŠ è¯„è®ºé›†çš„æ”»å‡»æ€§æˆ–äº‰è®®æ€§ã€‚
    
- ä»Žç»Ÿè®¡ä¸Šï¼ŒHeat æ˜¯ä¸€ä¸ªå…¸åž‹çš„ **æ­£å‘åå·®æŽ§åˆ¶å˜é‡**ï¼Œç”¨äºŽæŽ’é™¤â€œé«˜æš´åŠ›è¯„è®ºåªæ˜¯å› ä¸ºè¢«æ›´å¤šäººçœ‹åˆ°â€çš„æƒ…å†µã€‚
    

**å¯èƒ½çš„å½±å“ï¼š**

- æ­£ç›¸å…³ï¼šé«˜çƒ­åº¦è¯„è®ºé›†æ›´å®¹æ˜“äº§ç”Ÿæ¿€çƒˆå­è¯„è®º â†’ ç½‘ç»œæš´åŠ›å¢žå¼º
    
- è´Ÿç›¸å…³ï¼šæŸäº›çƒ­é—¨è¯„è®ºå¯èƒ½æ›´å’Œè°ï¼ˆè¢«ç‚¹èµžã€è¢«ç®¡æŽ§ï¼‰ â†’ ç½‘ç»œæš´åŠ›å‡å¼±
    

**å»ºæ¨¡å»ºè®®ï¼š**

- å¯ä»¥å–å¯¹æ•°ï¼š`log(Heat+1)`ï¼Œç¼“è§£å¤§å€¼å¯¹æ¨¡åž‹çš„å½±å“
    
- ä¹Ÿå¯ä»¥åš z-score æ ‡å‡†åŒ–


Python å®žçŽ°ï¼š

```python
def calc_heat(thread):
    parent_likes = thread['parent_comment']['like_count']
    sub_count = len(thread['sub_comments'])
    return parent_likes + sub_count
```

---

### 2ï¸âƒ£ DepthMeanï¼ˆå¹³å‡å±‚çº§ï¼‰

å®šä¹‰ä¸ºï¼šæ‰€æœ‰è¯„è®ºçš„æ·±åº¦å¹³å‡å€¼

- åŽŸå®šä¹‰æ˜¯ **å¹³å‡æ·±åº¦**  
$$ D e p t h M e a n = \frac {\sum_ {i} d e p t h _ {i}}{N} $$
    
- å¯¹ä¸¤çº§ç»“æž„ï¼š  
$$ D e p t h M e a n = \frac {0 + \underbrace {1 + 1 + \cdots + 1} _ {\text {å­ è¯„ è®º æ•°}}}{1 + \text {å­ è¯„ è®º æ•°}} = \frac {\text {å­ è¯„ è®º æ•°}}{1 + \text {å­ è¯„ è®º æ•°}} $$
    
- è¿™å°±å˜æˆäº† **å­è¯„è®ºå æ¯”çš„å‡½æ•°**ï¼Œå¯ä»¥ç›´æŽ¥è¡¨ç¤ºä¸ºï¼š  
    $$ C h i l d R a t i o = \frac {\text {å­ è¯„ è®º æ•°}}{\text {æ€» è¯„ è®º æ•°}} $$

âœ… **ç»“è®º**ï¼šåœ¨ä¸¤çº§ç»“æž„ä¸‹ï¼ŒDepthMean æœ¬è´¨ä¸Šæ˜¯ **å­è¯„è®ºå æ¯”**ï¼Œç”¨å®ƒå°±è¶³å¤Ÿï¼Œä¸éœ€è¦é¢å¤–æ·±åº¦æŒ‡æ ‡ã€‚

**é€»è¾‘è§£é‡Šï¼š**

- çˆ¶è¯„è®ºæœ¬èº«ä¸º 0 å±‚ï¼Œå­è¯„è®ºä¸º 1 å±‚ï¼ˆæˆ–æ›´å¤šï¼‰ã€‚
    
- å¹³å‡å±‚çº§è¶Šæ·±ï¼Œæ„å‘³ç€è®¨è®ºé“¾è¶Šé•¿ï¼Œè¯„è®ºé›†ä¸­å¯èƒ½å‡ºçŽ°â€œè¾å°„å¼äº‰åµâ€ã€‚
    
- ä»£è¡¨è¯„è®ºäº’åŠ¨ç»“æž„ï¼Œå½±å“ç½‘ç»œæš´åŠ›è¡¨çŽ°æ–¹å¼ã€‚
    

**å¯èƒ½çš„å½±å“ï¼š**

- æ­£ç›¸å…³ï¼šæ›´æ·±çš„è®¨è®ºé“¾å¯èƒ½å¯¼è‡´äº‰è®®å‡çº§ â†’ ç½‘ç»œæš´åŠ›å¢žå¼º
    
- è´Ÿç›¸å…³ï¼šæ·±åº¦é«˜ä½†å­è¯„è®ºæ–‡æ˜Ž â†’ å¹³å‡æš´åŠ›å¯èƒ½ä¸‹é™
    
- æ€»ä½“ä½œç”¨éœ€è¦å’Œ `GroupConformity` ä¸€èµ·åˆ†æž

**å¿ƒç†å­¦è§£é‡Š**

- **ChildRatioï¼ˆDepthMeanï¼‰é«˜ â†’ çˆ¶è¯„è®ºå¸å¼•æ›´å¤šå›žå¤**
    
    - çˆ¶è¯„è®ºè¢«å¤§é‡å›žå¤ â†’ å¯èƒ½å½¢æˆâ€œå°ç¾¤ä½“èˆ†è®ºåŽ‹åŠ›â€ â†’ å¢žå¼ºä»Žä¼—å¿ƒç†
        
    - æˆ–è€…æ›´å¤šå­è¯„è®º â†’ æš´åŠ›å¼ºåº¦å¹³å‡åŒ–ï¼ˆå†²æ·¡å•æ¡æš´åŠ›è¯„è®ºï¼‰
        
- **ChildRatioï¼ˆDepthMeanï¼‰ä½Ž â†’ çˆ¶è¯„è®ºå­¤ç«‹**
    
    - çˆ¶è¯„è®ºå¯èƒ½æš´åŠ›ä½†ä¸è¢«å“åº” â†’ ä»Žä¼—æ•ˆåº”å¼±

Python å®žçŽ°ï¼š

```python
def calc_depth_mean(thread):
    depths = [thread['parent_comment']['depth']]
    depths += [sub['depth'] for sub in thread['sub_comments']]
    return sum(depths) / len(depths)
```


---

### 3ï¸âƒ£ TimeRangeï¼ˆæ—¶é—´è·¨åº¦ï¼‰

å®šä¹‰ä¸ºï¼šè¯„è®ºé›†å†…æœ€æ—©å’Œæœ€æ™šæ—¶é—´çš„å·®å€¼ï¼ˆç§’ä¸ºå•ä½ï¼‰

**é€»è¾‘è§£é‡Šï¼š**

- è¡¨ç¤ºè¯„è®ºæŒç»­æ—¶é—´ï¼Œåæ˜ è®¨è®ºæŒç»­æ€§ä¸Žå»¶ç»­æ€§ã€‚
    
- æ—¶é—´è·¨åº¦é•¿ï¼Œè¯´æ˜Žè¯¥è¯„è®ºé›†é•¿æœŸå­˜åœ¨äº‰è®®ï¼Œæˆ–è€…å®¹æ˜“è¢«æ–°ç”¨æˆ·åŠ å…¥ â†’ ç½‘ç»œæš´åŠ›æœ‰ç´¯ç§¯è¶‹åŠ¿ã€‚
    

**å¯èƒ½çš„å½±å“ï¼š**

- æ­£ç›¸å…³ï¼šé•¿æœŸè¢«å…³æ³¨çš„è¯„è®ºé›†å¯èƒ½äº§ç”Ÿæ›´å¤šæ”»å‡»æ€§è¨€è®º
    
- è´Ÿç›¸å…³ï¼šè®¨è®ºæŒç»­ä½†å‚ä¸Žè€…åˆ†æ•£ï¼Œæ¿€çƒˆå†²çªå¯èƒ½è¢«ç¨€é‡Š


Python å®žçŽ°ï¼š

```python
def calc_time_range(thread):
    times = [thread['parent_comment']['create_time']]
    times += [sub['create_time'] for sub in thread['sub_comments']]
    return max(times) - min(times)
```

---

### 4ï¸âƒ£ ç»¼åˆå‡½æ•°

å¯ä»¥æŠŠæŽ§åˆ¶å˜é‡å…¨éƒ¨è®¡ç®—åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼š

```python
def calc_control_vars(thread):
    heat = calc_heat(thread)
    depth_mean = calc_depth_mean(thread)
    time_range = calc_time_range(thread)
    return {
        'Heat': heat,
        'DepthMean': depth_mean,
        'TimeRange': time_range
    }
```

---

# ðŸ“ˆ å››ã€ç»Ÿè®¡å»ºæ¨¡æ€è·¯

åˆ†æžç›®æ ‡ï¼šéªŒè¯å‡è®¾

> H1ï¼šè¯„è®ºé›†çš„ä»Žä¼—å¿ƒç†å¼ºåº¦è¶Šé«˜ â†’ é›†ä½“æš´åŠ›å¼ºåº¦è¶Šé«˜ã€‚

## æ¨¡åž‹å½¢å¼ï¼ˆçº¿æ€§å›žå½’ï¼‰

$$ G r o u p V i o l e n c e _ {i} = \beta_ {0} + \beta_ {1} \cdot G r o u p C o n f o r m i t y _ {i} + \beta_ {2} \cdot H e a t _ {i} + \beta_ {3} \cdot C h i l d R a t i o _ {i} + \beta_ {4} \cdot T i m e R a n g e _ {i} + \epsilon_ {i} $$

å…¶ä¸­ï¼š

|ç¬¦å·|å«ä¹‰|è¯´æ˜Ž|
|---|---|---|
|GroupViolence|å› å˜é‡|çˆ¶è¯„è®ºé›†çš„æš´åŠ›å¼ºåº¦ï¼ˆ0â€“1ï¼‰|
|GroupConformity|è‡ªå˜é‡|è¯„è®ºè¯­è¨€çš„ä»Žä¼—å¿ƒç†æŒ‡æ ‡|
|Heat|æŽ§åˆ¶å˜é‡|è¯„è®ºé›†çƒ­åº¦|
|ChildRatio|æŽ§åˆ¶å˜é‡|å­è¯„è®ºå æ¯”|
|TimeRange|æŽ§åˆ¶å˜é‡|è¯„è®ºæŒç»­æ—¶é—´|
|Îµ|æ®‹å·®|æ¨¡åž‹æ— æ³•è§£é‡Šçš„éƒ¨åˆ†|


æˆ–ä½¿ç”¨å¯¹æ•°å›žå½’ï¼ˆè‹¥æš´åŠ›åˆ†å¸ƒåæ€ï¼‰ï¼š
$$ \log (G r o u p V i o l e n c e _ {i} + 1) = \dots $$
---
## ç»“æžœè§£é‡Šé€»è¾‘

è‹¥å›žå½’ç»“æžœä¸­ï¼š

- Î²â‚ï¼ˆä»Žä¼—ç³»æ•°ï¼‰> 0 ä¸”æ˜¾è‘—ï¼ˆp < 0.05ï¼‰ â†’ æ”¯æŒå‡è®¾ï¼š  
    â€œç¾¤ä½“ä»Žä¼—å¿ƒç†è¶Šå¼ºï¼Œæ•´ä½“ç½‘ç»œæš´åŠ›è¶Šå¼ºçƒˆã€‚â€
    
- æŽ§åˆ¶å˜é‡æ£€éªŒï¼š
    
    - Heat è‹¥æ˜¾è‘— â†’ è¡¨ç¤ºçƒ­åº¦æ•ˆåº”ï¼›
        
    - TimeRange è‹¥æ˜¾è‘— â†’ è¡¨ç¤ºæ—¶é—´åŠ¨æ€æ•ˆåº”ã€‚
        
# ðŸ“Š äº”ã€å¯è§†åŒ–ä¸Žæ£€éªŒ

| å›¾è¡¨    | å†…å®¹                     | ç›®çš„        |
| ----- | ---------------------- | --------- |
| æ•£ç‚¹å›¾   | Conformity vs Violence | è§‚å¯Ÿæ€»ä½“è¶‹åŠ¿    |
| çƒ­åŠ›å›¾   | è¯­ä¹‰ç›¸ä¼¼åº¦çŸ©é˜µ                | ç›´è§‚å±•ç¤ºè¶‹åŒçŽ°è±¡  |
| ç®±çº¿å›¾   | ä¸åŒæš´åŠ›æ°´å¹³çš„ä»Žä¼—åˆ†å¸ƒ            | å¯¹æ¯”ç»„å·®å¼‚     |
| å›žå½’æ®‹å·®å›¾ | æ¨¡åž‹æ‹Ÿåˆæ£€éªŒ                 | æ£€æŸ¥çº¿æ€§å‡è®¾åˆç†æ€§ |

---

# ðŸ§­ å…­ã€ç ”ç©¶è·¯çº¿å›¾

|é˜¶æ®µ|ä»»åŠ¡|è¾“å‡º|
|---|---|---|
|1|è§£æž JSON â†’ çˆ¶å­è¯„è®ºæ ‘|ç»“æž„åŒ– DataFrame|
|2|è®¡ç®—å•æ¡è¯„è®ºæŒ‡æ ‡|æš´åŠ›åˆ†å€¼ã€æƒ…ç»ªåˆ†å€¼|
|3|æŒ‰çˆ¶è¯„è®ºåˆ†ç»„|èšåˆä¸ºâ€œçˆ¶è¯„è®ºé›†â€|
|4|è®¡ç®—ä»Žä¼—æŒ‡æ ‡|è¯­ä¹‰+æƒ…ç»ª+ç‚¹èµžé›†ä¸­åº¦|
|5|ç»Ÿè®¡åˆ†æž|å›žå½’æ¨¡åž‹ã€æ˜¾è‘—æ€§æ£€éªŒ|
|6|ç»“æžœè§£é‡Š|è¶‹åŒä¸Žæš´åŠ›çš„å…³ç³»å›¾è¡¨|

|é˜¶æ®µ|æ­¥éª¤|è¾“å‡º|
|---|---|---|
|â‘ |è§£æž JSON â†’ DataFrame|å•æ¡è¯„è®ºè¡¨|
|â‘¡|æš´åŠ›/æƒ…ç»ªè¯†åˆ«|è¯„è®ºå±‚æŒ‡æ ‡|
|â‘¢|èšåˆçˆ¶è¯„è®ºé›†|è¯„è®ºé›†è¡¨|
|â‘£|è®¡ç®— Conformity + Violence|æŒ‡æ ‡è¡¨|
|â‘¤|å›žå½’åˆ†æž|æ¨¡åž‹ç³»æ•°|
|â‘¥|å¯è§†åŒ–ä¸Žè§£é‡Š|è¶‹åŠ¿å…³ç³»ä¸Žç»“è®º|

---

# âœ… ä¸ƒã€ä¸‹ä¸€æ­¥å¯å®žæ–½å»ºè®®

æˆ‘å¯ä»¥å¸®ä½ ï¼š

1. å†™å‡ºä¸€ä¸ªå®Œæ•´çš„ **Python åˆ†æžè„šæœ¬æ¡†æž¶**ï¼š
    
    - è‡ªåŠ¨è¯†åˆ«çˆ¶è¯„è®ºé›†ï¼›
        
    - è®¡ç®— `GroupViolence` ä¸Ž `GroupConformity`ï¼›
        
    - è¾“å‡ºåˆ†æžè¡¨æ ¼ä¸Žå›žå½’ç»“æžœã€‚
        
2. ä½ åªéœ€æä¾›ï¼š
    
    - JSON è¯„è®ºæ–‡ä»¶ï¼›
        
    - è‹¥å¯èƒ½ï¼Œæä¾› `ç”¨æˆ·æ˜µç§°ã€æ—¶é—´ã€ç‚¹èµžæ•°ã€è¯„è®ºå†…å®¹ã€çˆ¶ID` è¿™äº›æ ¸å¿ƒå­—æ®µã€‚
        


---




---

# ðŸ§± å…«ã€æ€»ç»“ç»“æž„ï¼ˆè®ºæ–‡æˆ–æŠ¥å‘Šæ¡†æž¶ï¼‰

|éƒ¨åˆ†|å†…å®¹|
|---|---|
|ç ”ç©¶èƒŒæ™¯|ä»Žä¼—å¿ƒç†ä¸Žç½‘ç»œæš´åŠ›çš„ç¤¾ä¼šå¿ƒç†åŸºç¡€|
|æ•°æ®æ¥æº|æŠ–éŸ³çŸ­è§†é¢‘è¯„è®ºï¼ˆè¯´æ˜Žé‡‡æ ·æ ‡å‡†ï¼‰|
|å˜é‡å®šä¹‰|è¯¦ç»†è§£é‡Šæš´åŠ›ä¸Žä»Žä¼—è®¡ç®—|
|æ¨¡åž‹ä¸Žæ–¹æ³•|å›žå½’å…¬å¼ä¸Žæ•°æ®å¤„ç†æµç¨‹|
|å®žè¯ç»“æžœ|å›žå½’è¡¨ã€æ˜¾è‘—æ€§æ£€éªŒ|
|è®¨è®º|ä»Žä¼—å¿ƒç†æœºåˆ¶è§£é‡Šã€å¹³å°æ²»ç†å¯ç¤º|

---

è§†ä¸ºä¸€ä¸ªâ€œå°åž‹èˆ†è®ºåœºâ€æˆ–â€œå¾®åž‹ç¤¾äº¤æƒ…å¢ƒâ€