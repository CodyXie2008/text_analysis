# æ–‡æœ¬åˆ†ææ¨¡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æ–‡æœ¬åˆ†ææ¨¡å—æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æŠ–éŸ³è¯„è®ºåˆ†æå·¥å…·ï¼Œæ”¯æŒæ•°æ®æ¸…æ´—ã€æƒ…æ„Ÿåˆ†æã€ç›¸ä¼¼åº¦åˆ†æã€æ—¶é—´åˆ†æå’Œç‚¹èµåˆ†æç­‰åŠŸèƒ½ã€‚è¯¥æ¨¡å—é‡‡ç”¨ç»Ÿä¸€çš„APIè°ƒç”¨è§„èŒƒï¼Œæ”¯æŒæœ¬åœ°å¤„ç†å’Œé˜¿é‡Œäº‘APIä¸¤ç§æ¨¡å¼ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
text_analysis/
â”œâ”€â”€ core/                           # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py                 # æ ¸å¿ƒæ¨¡å—åˆå§‹åŒ–
â”‚   â”œâ”€â”€ base_analyzer.py            # åŸºç¡€åˆ†æå™¨
â”‚   â”œâ”€â”€ data_paths.py               # è·¯å¾„ç®¡ç†
â”‚   â”œâ”€â”€ aliyun_api_manager.py      # é˜¿é‡Œäº‘APIç»Ÿä¸€ç®¡ç†å™¨
â”‚   â”œâ”€â”€ env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ .env                        # APIé…ç½®æ–‡ä»¶
â”œâ”€â”€ modules/                        # åˆ†æåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py                 # æ¨¡å—åˆå§‹åŒ–
â”‚   â”œâ”€â”€ data_cleaning_optimized.py  # æ•°æ®æ¸…æ´—æ¨¡å—
â”‚   â”œâ”€â”€ sentiment_analyzer_optimized.py  # æƒ…æ„Ÿåˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ similarity_analysis_optimized.py # ç›¸ä¼¼åº¦åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ time_analysis_optimized.py  # æ—¶é—´åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ like_analysis_optimized.py  # ç‚¹èµåˆ†ææ¨¡å—
â”‚   â””â”€â”€ hit_stopwords.txt           # åœç”¨è¯æ–‡ä»¶
â”œâ”€â”€ algorithms/                     # ç»Ÿè®¡ç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py                 # ç®—æ³•æ¨¡å—åˆå§‹åŒ–
â”‚   â”œâ”€â”€ normalization.py            # å½’ä¸€åŒ–ç®—æ³•
â”‚   â”œâ”€â”€ test_normalization.py       # å½’ä¸€åŒ–æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ README_normalization.md     # å½’ä¸€åŒ–ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ docs/                           # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ text_analysis_unified.py        # ç»Ÿä¸€å…¥å£ç‚¹
â”œâ”€â”€ utils.py                        # å·¥å…·å‡½æ•°
â””â”€â”€ README.md                       # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®æ¸…æ´—æ¨¡å— (`data_cleaning_optimized.py`)
- **åŠŸèƒ½**: æ¸…æ´—å’Œé¢„å¤„ç†æŠ–éŸ³è¯„è®ºæ•°æ®
- **åˆ†è¯æ¨¡å¼**: æ”¯æŒæœ¬åœ°åˆ†è¯(jieba)å’Œé˜¿é‡Œäº‘APIåˆ†è¯
- **æ¸…æ´—è§„åˆ™**: åƒåœ¾è¯„è®ºè¿‡æ»¤ã€æ–‡æœ¬æ¸…æ´—ã€åœç”¨è¯è¿‡æ»¤
- **è¾“å‡ºæ ¼å¼**: JSONã€CSVã€å¯è§†åŒ–å›¾è¡¨

### 2. æƒ…æ„Ÿåˆ†ææ¨¡å— (`sentiment_analyzer_optimized.py`)
- **åŠŸèƒ½**: åˆ†æè¯„è®ºæƒ…æ„Ÿå€¾å‘
- **åˆ†ææ¨¡å¼**: æœ¬åœ°è¯å…¸åˆ†æå’Œé˜¿é‡Œäº‘APIåˆ†æ
- **æƒ…æ„Ÿåˆ†ç±»**: æ­£é¢ã€è´Ÿé¢ã€ä¸­æ€§
- **å¹¶å‘å¤„ç†**: æ”¯æŒæ‰¹é‡å¹¶å‘åˆ†æ

### 3. ç›¸ä¼¼åº¦åˆ†ææ¨¡å— (`similarity_analysis_optimized.py`)
- **åŠŸèƒ½**: åˆ†æè¯„è®ºé—´çš„ç›¸ä¼¼åº¦ï¼Œè¯†åˆ«æ¨¡ä»¿æ€§è¯„è®º
- **æŠ€æœ¯**: åŸºäºé˜¿é‡Œäº‘æ–‡æœ¬å‘é‡API
- **åº”ç”¨**: ä»ä¼—å¿ƒç†åˆ†æã€å†…å®¹é‡å¤æ£€æµ‹
- **è¾“å‡º**: ç›¸ä¼¼åº¦çŸ©é˜µã€æ¨¡ä»¿æ€§è¯„è®ºåˆ—è¡¨

### 4. æ—¶é—´åˆ†ææ¨¡å— (`time_analysis_optimized.py`)
- **åŠŸèƒ½**: åˆ†æè¯„è®ºæ—¶é—´åˆ†å¸ƒå’Œé›†ä¸­åº¦
- **æŒ‡æ ‡**: æ—¶é—´é›†ä¸­åº¦ã€è¯„è®ºæ—¶é—´é—´éš”
- **å¯è§†åŒ–**: æ—¶é—´åˆ†å¸ƒå›¾è¡¨

### 5. ç‚¹èµåˆ†ææ¨¡å— (`like_analysis_optimized.py`)
- **åŠŸèƒ½**: åˆ†æç‚¹èµäº’åŠ¨æ¨¡å¼
- **æŒ‡æ ‡**: ç‚¹èµåˆ†å¸ƒã€äº’åŠ¨çƒ­åº¦
- **åº”ç”¨**: å†…å®¹è´¨é‡è¯„ä¼°

## ğŸ”§ ç»Ÿä¸€APIç®¡ç†å™¨

### é˜¿é‡Œäº‘APIç»Ÿä¸€ç®¡ç†å™¨ (`core/aliyun_api_manager.py`)

**æ”¯æŒçš„API**:
- ä¸­æ–‡åˆ†è¯ï¼ˆåŸºç¡€ç‰ˆï¼‰- `GetWsChGeneral`
- æƒ…æ„Ÿåˆ†æï¼ˆåŸºç¡€ç‰ˆï¼‰- `GetSaChGeneral`
- æ–‡æœ¬å‘é‡ï¼ˆåŸºç¡€ç‰ˆï¼‰- `GetWeChGeneral`

**ç¯å¢ƒå˜é‡é…ç½®**:
```bash
# é˜¿é‡Œäº‘APIé…ç½®
NLP_AK_ENV=your_access_key_id_here
NLP_SK_ENV=your_access_key_secret_here
NLP_REGION_ENV=cn-hangzhou
```

**ä¸»è¦åŠŸèƒ½**:
- ç»Ÿä¸€çš„APIè°ƒç”¨æ¥å£
- è‡ªåŠ¨ç¯å¢ƒå˜é‡åŠ è½½
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- è¯·æ±‚æ—¥å¿—è®°å½•
- æ‰¹é‡å¤„ç†æ”¯æŒ

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp text_analysis/core/.env.example text_analysis/core/.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥é˜¿é‡Œäº‘APIå¯†é’¥
NLP_AK_ENV=your_access_key_id_here
NLP_SK_ENV=your_access_key_secret_here
NLP_REGION_ENV=cn-hangzhou
```

### 2. æ•°æ®æ¸…æ´—

```bash
# æœ¬åœ°åˆ†è¯æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
python text_analysis/modules/data_cleaning_optimized.py --video-id 7306437681045654834 --limit 100

# APIåˆ†è¯æ¨¡å¼
python text_analysis/modules/data_cleaning_optimized.py --video-id 7306437681045654834 --limit 100 --segment-mode api
```

### 3. æƒ…æ„Ÿåˆ†æ

```bash
# æœ¬åœ°è¯å…¸åˆ†æ
python text_analysis/modules/sentiment_analyzer_optimized.py --video-id 7306437681045654834 --limit 100 --type local

# é˜¿é‡Œäº‘APIåˆ†æ
python text_analysis/modules/sentiment_analyzer_optimized.py --video-id 7306437681045654834 --limit 100 --type aliyun
```

### 4. ç›¸ä¼¼åº¦åˆ†æ

```bash
python text_analysis/modules/similarity_analysis_optimized.py --video-id 7306437681045654834 --limit 100
```

### 5. ç»Ÿä¸€å…¥å£

```bash
# ä½¿ç”¨ç»Ÿä¸€å…¥å£ç‚¹
python text_analysis/text_analysis_unified.py cleaning --video-id 7306437681045654834 --limit 100
python text_analysis/text_analysis_unified.py sentiment --video-id 7306437681045654834 --limit 100 --type aliyun
python text_analysis/text_analysis_unified.py similarity --video-id 7306437681045654834 --limit 100
```

## ğŸ” APIè°ƒç”¨æµ‹è¯•

### æµ‹è¯•APIå¯ç”¨æ€§
```python
from text_analysis.core.aliyun_api_manager import is_aliyun_api_available
print('APIå¯ç”¨æ€§:', is_aliyun_api_available())
```

### æµ‹è¯•åˆ†è¯åŠŸèƒ½
```python
from text_analysis.core.aliyun_api_manager import get_aliyun_api_manager
manager = get_aliyun_api_manager()
words = manager.segment_text("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬")
print('åˆ†è¯ç»“æœ:', words)
```

### æµ‹è¯•æƒ…æ„Ÿåˆ†æ
```python
sentiment = manager.analyze_sentiment("è¿™ä¸ªè§†é¢‘å¾ˆæ£’ï¼")
print('æƒ…æ„Ÿåˆ†æ:', sentiment)
```

### æµ‹è¯•æ–‡æœ¬å‘é‡
```python
vector = manager.get_text_vector("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬")
print('å‘é‡ç»´åº¦:', len(vector))
```

## ğŸ“Š è¾“å‡ºç»“æœ

æ‰€æœ‰åˆ†ææ¨¡å—éƒ½ä¼šç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š

1. **æ•°æ®æ–‡ä»¶**: JSONã€CSVæ ¼å¼çš„åˆ†æç»“æœ
2. **åˆ†ææŠ¥å‘Š**: è¯¦ç»†çš„ç»Ÿè®¡æŠ¥å‘Š
3. **å¯è§†åŒ–å›¾è¡¨**: å›¾è¡¨å’Œå¯è§†åŒ–ç»“æœ
4. **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

è¾“å‡ºç›®å½•ç»“æ„ï¼š
```
data/
â”œâ”€â”€ processed/      # æ¸…æ´—åçš„æ•°æ®
â”œâ”€â”€ results/        # åˆ†æç»“æœ
â”œâ”€â”€ reports/        # åˆ†ææŠ¥å‘Š
â””â”€â”€ visualizations/ # å¯è§†åŒ–å›¾è¡¨
```

## ğŸ› ï¸ æŠ€æœ¯ç‰¹ç‚¹

### ä»£ç ä¼˜åŒ–
- âœ… **ç»Ÿä¸€APIè°ƒç”¨**: æ‰€æœ‰æ¨¡å—ä½¿ç”¨ç»Ÿä¸€çš„APIç®¡ç†å™¨
- âœ… **ä»£ç å»å†—ä½™**: åˆ é™¤äº†é‡å¤çš„æ¯”è¾ƒå’Œå¯è§†åŒ–å·¥å…·
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»å’ŒèŒè´£åˆ’åˆ†
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œå›é€€æœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–
- âœ… **å¹¶å‘å¤„ç†**: æ”¯æŒæ‰¹é‡å¹¶å‘APIè°ƒç”¨
- âœ… **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤APIè°ƒç”¨
- âœ… **é™æµæ§åˆ¶**: é˜²æ­¢APIè°ƒç”¨é¢‘ç‡è¿‡é«˜
- âœ… **èµ„æºç®¡ç†**: è‡ªåŠ¨é‡Šæ”¾æ•°æ®åº“è¿æ¥

### ç”¨æˆ·ä½“éªŒ
- âœ… **çµæ´»é…ç½®**: æ”¯æŒå¤šç§ç¯å¢ƒå˜é‡é…ç½®æ–¹å¼
- âœ… **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- âœ… **è¿›åº¦æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦
- âœ… **ç»“æœå¯è§†åŒ–**: ä¸°å¯Œçš„å›¾è¡¨å’Œå¯è§†åŒ–è¾“å‡º

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„åˆ†ææ¨¡å—

1. ç»§æ‰¿ `BaseAnalyzer` ç±»
2. å®ç° `analyze()` æ–¹æ³•
3. åœ¨ `modules/__init__.py` ä¸­æ³¨å†Œæ¨¡å—
4. æ›´æ–°ç»Ÿä¸€å…¥å£ç‚¹

### æ‰©å±•APIåŠŸèƒ½

1. åœ¨ `AliyunAPIManager` ä¸­æ·»åŠ æ–°çš„APIæ–¹æ³•
2. æ›´æ–°ç¯å¢ƒå˜é‡é…ç½®
3. æ·»åŠ ç›¸åº”çš„é”™è¯¯å¤„ç†
4. æ›´æ–°æ–‡æ¡£è¯´æ˜

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-08-30)
- âœ… é‡æ„APIè°ƒç”¨æ¶æ„ï¼Œç»Ÿä¸€ä½¿ç”¨ `AliyunAPIManager`
- âœ… ä¼˜åŒ–ä»£ç ç»“æ„ï¼Œåˆ é™¤å†—ä½™æ–‡ä»¶
- âœ… æ”¹è¿›ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†
- âœ… å¢å¼ºé”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åˆ†æåŠŸèƒ½å®ç°

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼

## ï¿½ï¿½ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚
